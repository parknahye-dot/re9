(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}})();const r=document.getElementById("backgroundCanvas"),i=r.getContext("2d"),a=document.getElementById("drawingCanvas"),n=a.getContext("2d"),C=document.getElementById("gridToggle"),w=document.getElementById("colorPicker"),p=document.getElementById("brushSize"),k=document.getElementById("toolSelect");let u=!1,f,g,h=w.value,v=p.value,d="pen",y=!1;function E(){const e=window.innerWidth-40,t=window.innerHeight-150;r.width=a.width=e,r.height=a.height=t,console.log(" width -- "+e),console.log(" bgCanvas.height -- "+r.height),L()}window.addEventListener("resize",E);E();function I(e=25){i.strokeStyle="#e0e0e0",i.lineWidth=1;for(let t=0;t<r.width;t+=e)i.beginPath(),i.moveTo(t,0),i.lineTo(t,r.height),i.stroke();for(let t=0;t<r.height;t+=e)i.beginPath(),i.moveTo(0,t),i.lineTo(r.width,t),i.stroke()}function L(){i.fillStyle="#ffffff",i.fillRect(0,0,r.width,r.height),y&&I()}C.addEventListener("change",e=>{y=e.target.checked,L()});a.addEventListener("mousedown",e=>{u=!0,f=e.offsetX,g=e.offsetY,console.log(" startX -- "+f),(d==="pen"||d==="eraser")&&(n.beginPath(),n.moveTo(f,g))});a.addEventListener("mousemove",e=>{u&&(d==="pen"||d==="eraser")&&(n.lineWidth=v,n.lineCap="round",n.strokeStyle=d==="eraser"?"#ffffff":h,n.lineTo(e.offsetX,e.offsetY),n.stroke())});a.addEventListener("mouseup",e=>{if(!u)return;u=!1;const t=e.offsetX,l=e.offsetY;if(n.lineWidth=v,n.strokeStyle=h,n.fillStyle=h,d==="line")n.beginPath(),n.moveTo(f,g),n.lineTo(t,l),n.stroke();else if(d==="rect")n.strokeRect(f,g,t-f,l-g);else if(d==="circle"){const c=Math.sqrt(Math.pow(t-f,2)+Math.pow(l-g,2));n.beginPath(),n.arc(f,g,c,0,Math.PI*2),n.stroke()}});w.addEventListener("input",e=>{h=e.target.value});p.addEventListener("input",e=>{v=e.target.value});k.addEventListener("change",e=>{d=e.target.value});document.getElementById("clearBtn").addEventListener("click",()=>{n.clearRect(0,0,a.width,a.height)});function b(e="png"){const t=document.createElement("canvas"),l=t.getContext("2d");t.width=r.width,t.height=r.height,l.drawImage(r,0,0),l.drawImage(a,0,0);const c=document.createElement("a");c.download=`drawing.${e}`,c.href=t.toDataURL(`image/${e}`),c.click()}document.getElementById("savePngBtn").addEventListener("click",()=>b("png"));document.getElementById("saveJpgBtn").addEventListener("click",()=>b("jpeg"));
